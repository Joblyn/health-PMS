{"ast":null,"code":"import _defineProperty from \"/home/joblyn/Desktop/health.workcradle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/joblyn/Desktop/health.workcradle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/joblyn/Desktop/health.workcradle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/joblyn/Desktop/health.workcradle/src/pages/superadmin/DietitianDetails.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router\";\nimport { Container, Row, Col, Card, CardHeader, Button // FormGroup,\n, Alert, FormInput } from \"shards-react\";\nimport { getAllDietitians, deleteUserAction, updateDietitianData } from \"../../actions/superadmin/dietitian\";\nimport { getDietitians, deleteUserEndpoint, updateCompanyDataEndpoint } from \"../../apiConstants/apiConstants\";\nimport PageSpinner from \"../../components/common/PageSpinner\";\nimport PageTitle from \"../../components/common/PageTitle\";\nimport avatar1 from \"../../images/avatars/1.jpg\";\nexport default function DietitianDetails() {\n  var dietitian = JSON.parse(localStorage.getItem(\"dietitian\"));\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      control = _useState2[0],\n      setControl = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      edit = _useState4[0],\n      setEdit = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      updated = _useState6[0],\n      setUpdated = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      alert = _useState8[0],\n      setAlert = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      popUp = _useState10[0],\n      setPopup = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      deleted = _useState12[0],\n      setDeleted = _useState12[1];\n\n  var history = useHistory();\n  var dispatch = useDispatch();\n  var allDietitians = useSelector(function (state) {\n    return state.allDietitians;\n  });\n  var updatedDietitianData = useSelector(function (state) {\n    return state.updateDietitianData;\n  });\n  var deletedUser = useSelector(function (state) {\n    return state.deleteUser;\n  });\n  useEffect(function () {\n    var endpoint = getDietitians + dietitian.companyCode;\n    dispatch(getAllDietitians(endpoint));\n  }, []);\n  useEffect(function () {\n    if (allDietitians.data) {\n      var dietitianArr = allDietitians.data.filter(function (item) {\n        return item.Dietitian.id === dietitian.id;\n      });\n      setControl(dietitianArr[0].Dietitian);\n    }\n  }, [allDietitians]);\n  useEffect(function () {\n    if (updated && updatedDietitianData.data) {\n      setAlert(true);\n    }\n  }, [updated, updatedDietitianData]);\n  useEffect(function () {\n    if (alert) {\n      setTimeout(function () {\n        setAlert(false);\n        window.location.reload();\n      }, 2000);\n    }\n  }, [alert]);\n  useEffect(function () {\n    if (deleted && deletedUser.isSuccessful) {\n      setAlert(true);\n      history.push('/superadmin/dietitians');\n    }\n  }, [deleted, deletedUser]);\n\n  var handleChange = function handleChange(_ref) {\n    var target = _ref.target;\n    setControl(_objectSpread({}, control, _defineProperty({}, target.name, target.value)));\n  };\n\n  var submitChanges = function submitChanges() {\n    var endpoint = updateCompanyDataEndpoint + control.id;\n    delete control.createdAt;\n    delete control.updatedAt;\n    delete control.id;\n    delete control.isSuperAdmin;\n    console.log(control);\n    dispatch(updateDietitianData(endpoint, control));\n    setUpdated(true);\n  };\n\n  var deleteUser = function deleteUser() {\n    var endpoint = deleteUserEndpoint + control.id;\n    dispatch(deleteUserAction(endpoint));\n    setDeleted(true);\n  };\n\n  if (!control) {\n    return /*#__PURE__*/React.createElement(PageSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    className: \"main-content-container px-4 pb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    noGutters: true,\n    className: \"page-header py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(PageTitle, {\n    sm: \"4\",\n    title: \"Profile\",\n    subtitle: \"Dietitian\",\n    className: \"text-sm-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(popUp ? \"d-block\" : \"d-none\"),\n    style: {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      height: \"100%\",\n      width: \"100%\",\n      zIndex: 10,\n      background: \"rgba(0,0,0,.24\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(popUp ? \"d-flex\" : \"d-none\", \" justify-content-center align-items-center\"),\n    style: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"p-3 mx-auto\",\n    style: {\n      position: \"absolute\",\n      zIndex: 1000,\n      width: 400,\n      top: \"30%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }, \"Delete Dietitian?\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex flex-row justify-content-between mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return setPopup(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n    theme: \"danger\",\n    onClick: deleteUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, \"Delete\")))), alert && /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    className: \"px-0 sticky-top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    className: \"mb-0 text-center \".concat(deleted && \"bg-danger\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-info mx-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }), deleted ? \"Deleted Dietitian\" : \"Edited Dietitian Profile.\")), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"pb-2 mx-auto d-flex flex-colum justify-content-center align-items center\",\n    style: {\n      width: \"100%\",\n      maxWidth: \"500px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"rounded-circle\",\n    src: avatar1,\n    alt: control.name,\n    width: \"110\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  })), !edit ? /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }, control.name) : /*#__PURE__*/React.createElement(FormInput, {\n    type: \"email\",\n    defaultValue: control.name,\n    name: \"name\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 15\n    }\n  }), !edit ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-muted d-block mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 15\n    }\n  }, control.email) : /*#__PURE__*/React.createElement(FormInput, {\n    type: \"email\",\n    defaultValue: control.email,\n    name: \"email\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 15\n    }\n  }), !edit ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-muted d-block mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 15\n    }\n  }, control.phone) : /*#__PURE__*/React.createElement(FormInput, {\n    defaultValue: control.phone,\n    name: \"phone\",\n    disabled: !edit,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex flex-row justify-content-center mt-5 pb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 11\n    }\n  }, edit && /*#__PURE__*/React.createElement(Button, {\n    className: \"ml-3\",\n    onClick: function onClick() {\n      return setEdit(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 21\n    }\n  }, \"Cancel Changes\"), /*#__PURE__*/React.createElement(Button, {\n    className: \"ml-3\",\n    onClick: edit ? submitChanges : function () {\n      return setEdit(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }\n  }, edit ? \"Upload Changes\" : \"Edit Admin Profile\"), /*#__PURE__*/React.createElement(Button, {\n    theme: \"danger\",\n    className: \"ml-3\",\n    onClick: function onClick() {\n      return setPopup(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }\n  }, \"Delete dietitian\")))));\n}","map":{"version":3,"sources":["/home/joblyn/Desktop/health.workcradle/src/pages/superadmin/DietitianDetails.js"],"names":["React","useEffect","useState","useDispatch","useSelector","useHistory","Container","Row","Col","Card","CardHeader","Button","Alert","FormInput","getAllDietitians","deleteUserAction","updateDietitianData","getDietitians","deleteUserEndpoint","updateCompanyDataEndpoint","PageSpinner","PageTitle","avatar1","DietitianDetails","dietitian","JSON","parse","localStorage","getItem","control","setControl","edit","setEdit","updated","setUpdated","alert","setAlert","popUp","setPopup","deleted","setDeleted","history","dispatch","allDietitians","state","updatedDietitianData","deletedUser","deleteUser","endpoint","companyCode","data","dietitianArr","filter","item","Dietitian","id","setTimeout","window","location","reload","isSuccessful","push","handleChange","target","name","value","submitChanges","createdAt","updatedAt","isSuperAdmin","console","log","position","top","left","height","width","zIndex","background","maxWidth","email","phone"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router\";\nimport {\n  Container,\n  Row,\n  Col,\n  Card,\n  CardHeader,\n  Button,\n  // FormGroup,\n  Alert,\n  FormInput,\n} from \"shards-react\";\nimport {\n  getAllDietitians,\n  deleteUserAction,\n  updateDietitianData,\n} from \"../../actions/superadmin/dietitian\";\nimport {\n  getDietitians,\n  deleteUserEndpoint,\n  updateCompanyDataEndpoint,\n} from \"../../apiConstants/apiConstants\";\nimport PageSpinner from \"../../components/common/PageSpinner\";\nimport PageTitle from \"../../components/common/PageTitle\";\nimport avatar1 from \"../../images/avatars/1.jpg\";\n\nexport default function DietitianDetails() {\n  const dietitian = JSON.parse(localStorage.getItem(\"dietitian\"));\n  const [control, setControl] = useState();\n  const [edit, setEdit] = useState(false);\n  const [updated, setUpdated] = useState(false);\n  const [alert, setAlert] = useState(false);\n  const [popUp, setPopup] = useState(false);\n  const [deleted, setDeleted] = useState(false);\n\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  const allDietitians = useSelector((state) => state.allDietitians);\n  const updatedDietitianData = useSelector(\n    (state) => state.updateDietitianData\n  );\n  const deletedUser = useSelector((state) => state.deleteUser);\n\n  useEffect(() => {\n    let endpoint = getDietitians + dietitian.companyCode;\n    dispatch(getAllDietitians(endpoint));\n  }, []);\n\n  useEffect(() => {\n    if (allDietitians.data) {\n      let dietitianArr = allDietitians.data.filter(\n        (item) => item.Dietitian.id === dietitian.id\n      );\n      setControl(dietitianArr[0].Dietitian);\n    }\n  }, [allDietitians]);\n\n  useEffect(() => {\n    if (updated && updatedDietitianData.data) {\n      setAlert(true);\n    }\n  }, [updated, updatedDietitianData]);\n\n  useEffect(() => {\n    if (alert) {\n      setTimeout(() => {\n        setAlert(false);\n        window.location.reload();\n      }, 2000);\n    }\n  }, [alert]);\n\n  useEffect(() => {\n    if (deleted && deletedUser.isSuccessful) {\n      setAlert(true);\n      history.push('/superadmin/dietitians');\n    }\n  }, [deleted, deletedUser]);\n\n  const handleChange = ({ target }) => {\n    setControl({ ...control, [target.name]: target.value });\n  };\n\n  const submitChanges = () => {\n    let endpoint = updateCompanyDataEndpoint + control.id;\n    delete control.createdAt;\n    delete control.updatedAt;\n    delete control.id;\n    delete control.isSuperAdmin;\n    console.log(control);\n    dispatch(updateDietitianData(endpoint, control));\n    setUpdated(true);\n  };\n\n  const deleteUser = () => {\n    let endpoint = deleteUserEndpoint + control.id;\n    dispatch(deleteUserAction(endpoint));\n    setDeleted(true);\n  };\n\n  if (!control) {\n    return <PageSpinner />;\n  }\n\n  return (\n    <Container fluid className=\"main-content-container px-4 pb-4\">\n      <Row noGutters className=\"page-header py-4\">\n        <PageTitle\n          sm=\"4\"\n          title=\"Profile\"\n          subtitle=\"Dietitian\"\n          className=\"text-sm-left\"\n        />\n      </Row>\n      <div\n        className={`${popUp ? \"d-block\" : \"d-none\"}`}\n        style={{\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          height: \"100%\",\n          width: \"100%\",\n          zIndex: 10,\n          background: \"rgba(0,0,0,.24\",\n        }}\n      ></div>\n      <div className={`${popUp ? \"d-flex\" : \"d-none\"} justify-content-center align-items-center`} style={{width: '100%'}}>\n      <Card\n        className={`p-3 mx-auto`}\n        style={{ position: \"absolute\", zIndex: 1000, width: 400, top: \"30%\" }}\n      >\n        <div className=\"text-center\">\n          <h5>Delete Dietitian?</h5>\n        </div>\n        <div className=\"d-flex flex-row justify-content-between mt-3\">\n          <Button onClick={() => setPopup(false)}>Cancel</Button>\n        <Button theme=\"danger\" onClick={deleteUser}>\n          Delete\n        </Button>\n        </div>\n      </Card>\n\n      </div>\n      {alert && (\n        <Container fluid className=\"px-0 sticky-top\">\n          <Alert className={`mb-0 text-center ${deleted && \"bg-danger\"}`}>\n            <i className=\"fa fa-info mx-2\"></i>\n            {deleted ? \"Deleted Dietitian\" : \"Edited Dietitian Profile.\"}\n          </Alert>\n        </Container>\n      )}\n      <Col>\n        <Card\n          className=\"pb-2 mx-auto d-flex flex-colum justify-content-center align-items center\"\n          style={{ width: \"100%\", maxWidth: \"500px\" }}\n        >\n          <CardHeader className=\"text-center\">\n            <div className=\"mb-3 mx-auto\">\n              <img\n                className=\"rounded-circle\"\n                src={avatar1}\n                alt={control.name}\n                width=\"110\"\n              />\n            </div>\n            {!edit ? (\n              <h4 className=\"mb-0\">{control.name}</h4>\n            ) : (\n              <FormInput\n                type=\"email\"\n                defaultValue={control.name}\n                name=\"name\"\n                onChange={handleChange}\n              />\n            )}\n            {!edit ? (\n              <span className=\"text-muted d-block mb-2\">{control.email}</span>\n            ) : (\n              <FormInput\n                type=\"email\"\n                defaultValue={control.email}\n                name=\"email\"\n                onChange={handleChange}\n              />\n            )}\n            {!edit ? (\n              <span className=\"text-muted d-block mb-2\">{control.phone}</span>\n            ) : (\n              <FormInput\n                defaultValue={control.phone}\n                name=\"phone\"\n                disabled={!edit}\n                onChange={handleChange}\n              />\n            )}\n          </CardHeader>\n\n          <div className=\"d-flex flex-row justify-content-center mt-5 pb-1\">\n           {edit && <Button className=\"ml-3\" onClick={() => setEdit(false)}>\n              Cancel Changes\n            </Button>}\n            <Button\n              className=\"ml-3\"\n              onClick={edit ? submitChanges : () => setEdit(true)}\n            >\n              {edit ? \"Upload Changes\" : \"Edit Admin Profile\"}\n            </Button>\n            <Button theme=\"danger\" className=\"ml-3\" onClick={() => setPopup(true)}>\n              Delete dietitian\n            </Button>\n          </div>\n        </Card>\n      </Col>\n    </Container>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}